
@using Bug_Tracker.ViewModel

@using Bug_Tracker.Models

@using Bug_Tracker.Helpers

<!--================================-->
<!-- Page Container Start -->
<!--================================-->
<div class="page-container">
    <!--================================-->
    <!-- Page Content Start -->
    <!--================================-->


    <!--================================-->
    <!-- Page Inner Start -->
    <!--================================-->
    <div class="page-inner">
        <!-- Main Wrapper -->
        <div id="main-wrapper">
            <!--================================-->
            <!-- Breadcrumb Start -->
            <!--================================-->
            <div class="pageheader pd-t-25 pd-b-35">
                <div class="pd-t-5 pd-b-5">
                    <h1 class="pd-0 mg-0 tx-20">Welcome to the Bug Lab!</h1>
                </div>
                <div class="breadcrumb pd-0 mg-0">
                    <span class="breadcrumb-item" href=""><i class="icon ion-ios-home-outline"></i> Home</span>
                    <a class="breadcrumb-item" href="">Dashboard</a>
                    <span class="breadcrumb-item active">OVERVIEW</span>
                </div>
            </div>
            <!--/ Breadcrumb End -->
            <!--================================-->
            <!-- Counter Start -->
            <!--================================-->
            @if (User.IsInRole("Admin") || User.IsInRole("ProjectManager"))
            {
                <div class="row row-xs clearfix">
                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>Total Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-warning">
                                            <i class="icon-user tx-warning tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.TicketCount</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>New Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-success">
                                            <i class="icon-screen-desktop tx-success tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.TicketStatusNew</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>Urgent Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-danger">
                                            <i class="icon-tag tx-danger tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.HighPriorityTicketCount</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>UnAssigned Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-primary">
                                            <i class="icon-user-follow tx-primary tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.TicketStatusUnAssigned</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }


            @if (User.IsInRole("Developer"))
            {
                <div class="row row-xs clearfix">
                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>Total Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-warning">
                                            <i class="icon-user tx-warning tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.TicketCount</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>New Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-success">
                                            <i class="icon-screen-desktop tx-success tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.TicketStatusNew</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>Urgent Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-danger">
                                            <i class="icon-tag tx-danger tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.HighPriorityTicketCount</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>UnAssigned Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-primary">
                                            <i class="icon-user-follow tx-primary tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.TicketStatusUnAssigned</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }

            @if (User.IsInRole("Submitter"))
            {
                <div class="row row-xs clearfix">
                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>Total Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-warning">
                                            <i class="icon-user tx-warning tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.TicketCount</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>New Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-success">
                                            <i class="icon-screen-desktop tx-success tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.TicketStatusNew</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>Urgent Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-danger">
                                            <i class="icon-tag tx-danger tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.HighPriorityTicketCount</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-xl-3">
                        <div class="card mg-b-20">
                            <div class="card-body pd-y-0">
                                <div class="custom-fieldset mb-4">
                                    <div class="clearfix">
                                        <label>UnAssigned Tickets</label>
                                    </div>
                                    <div class="d-flex align-items-center text-dark">
                                        <div class="wd-40 wd-md-50 ht-40 ht-md-50 mg-r-10 mg-md-r-10 d-flex align-items-center justify-content-center rounded card-icon-primary">
                                            <i class="icon-user-follow tx-primary tx-20"></i>
                                        </div>
                                        <div>
                                            <h2 class="tx-20 tx-sm-18 tx-md-24 mb-0 mt-2 mt-sm-0 tx-normal tx-rubik tx-dark"><span class="counter">@Model.TicketStatusUnAssigned</span><small class="tx-15"></small></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }

            <!--/ Counter End -->


            <div class="row row-xs clearfix">
                <!--  Ticket Priorities Graph Start-->
                <!--================================-->
                <!-- Bar Chart 1 Start -->
                <!--================================-->
                <div class="col-xl-8 col-md-12 col-lg-12">
                    <div class="card mg-b-20">
                        <div class="card-header">
                            <h4 class="card-header-title">
                                Ticket Priorities Chart
                            </h4>
                            <div class="card-header-btn">
                                <img src="~/Images/legend.png" />
                            </div>
                        </div>
                        <div class="card-body collapse show" id="collapse1">
                            <div class="clearfix">
                                <div id="tixPriorityBar" style="height: 500px"></div>
                            </div>

                        </div>
                    </div>
                </div>
                <!--/ Bar Chart 1 End -->
                <!--================================-->
                <!--================================-->
                <!-- Donut Chart 2 Start -->
                <!--================================-->
                <div class="col-xl-4 col-md-12 col-lg-12">
                    <div class="card mg-b-20">
                        <div class="card-header">
                            <h4 class="card-header-title">
                                Overview of Ticket Statuses
                            </h4>
                            <div class="card-header-btn">
                                <img src="~/Images/pielegend.png" />
                            </div>
                        </div>
                        <div class="card-body collapse show" id="collapse8">
                            <div class="clearfix">
                                <div id="donut2" class="morris-donut" style="height: 320px"></div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 col-md-6 col-xl-12 mg-t-40">
                                    <div class="d-flex justify-content-between">
                                        <h6 class="tx-uppercase tx-10 mg-b-0 tx-gray-500"></h6>
                                        <span class="tx-10 tx-gray-500"></span>
                                    </div>
                                    <div class="d-flex align-items-end justify-content-between mg-b-5">
                                        <h5 class="mg-b-0 tx-dark tx-rubik tx-normal"><span class="counter">New Tickets</span></h5>
                                        <div class="d-flex align-items-center tx-gray-600"><span class="small text-success mr-2 d-flex align-items-center"><i class="ion-android-arrow-up mr-1"></i>@Model.TicketStatusNew</span></div>
                                    </div>
                                    <div class="progress ht-3 mg-b-0 op-5">
                                        <div class="progress-bar bg-danger wd-100p" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <br />
                                </div>
                                <div class="col-sm-12 col-md-6 col-xl-12 mg-t-40">
                                    <div class="d-flex justify-content-between">
                                        <h6 class="tx-uppercase tx-10 mg-b-0 tx-gray-500"></h6>
                                        <span class="tx-10 tx-gray-500"></span>
                                    </div>
                                    <div class="d-flex align-items-end justify-content-between mg-b-5">
                                        <h5 class="mg-b-0 tx-dark tx-rubik tx-normal"><span class="counter">UnAssigned Tickets</span></h5>
                                        <div class="d-flex align-items-center tx-gray-600"><span class="small text-success mr-2 d-flex align-items-center"><i class="ion-android-arrow-up mr-1"></i>@Model.TicketStatusUnAssigned</span></div>
                                    </div>
                                    <div class="progress ht-3 mg-b-0 op-5">
                                        <div class="progress-bar bg-warning wd-100p" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                    <br />
                                </div>



                            </div>

                        </div>



                    </div>


                </div>
                <!--/ Donut Chart 2 End -->
            </div>

            <!--/ Main Wrapper End -->
        </div>
        <!--/ Page Inner End -->
    </div>
    <!--/ Page Content End -->
</div>
<!--/ Page Container End -->
<!--================================-->
<!-- Scroll To Top Start-->
<!--================================-->
<a href="" data-click="scroll-top" class="btn-scroll-top fade"><i class="fa fa-arrow-up"></i></a>
<!--/ Scroll To Top End -->
<!--================================-->



@section scripts {
    <script>
            var unAuthorizedTicketAccess = '@TempData["UnAuthorizedTicketAccess"]';
            if (unAuthorizedTicketAccess != "") {
                Swal.fire({
                    title: "You are not authorized!",
                    text: UnAuthorizedTicketAccess,
                    icon: 'error',
                    confirmButtonText: "OK"
                })
            }

        $(document).ready(function () {

            // MORRIS DONUT CHART 2
            Morris.Donut({
                element: 'donut2',
                data: [
                {
                    label: 'New',
                    value: @Model.TicketStatusNew
                },
                {
                    label: 'Assigned',
                    value: @Model.TicketStatusAssigned
                },
                {
                    label: 'Unassigned',
                    value: @Model.TicketStatusUnAssigned
                },
                {
                    label: 'Completed',
                    value: @Model.TicketStatusCompleted
                },
                ],
                colors: ['#D04F32', '#FFE971', '#8BD3E3', '#49BBD0'],
                resize: true
            });


        });


            $.ajax({
                type: "POST",
                url: '@Url.Action("GetTicketPriorityChartData", "Chart")',
                dataType: "json"
            }).then(function (response) {
                Morris.Bar({
                        barGap: 15,
                        element: 'tixPriorityBar',
                        data: [response.Data],
                        xkey: 0,
                        ykeys: response.YKeys,
                        labels: response.Labels,
                        barColors: ['#D04F32', '#49BBD0', '#FFE971', '#8BD3E3', '#184A92'],
                        gridTextSize: 11,
                        hideHover: 'auto',
                        resize: true
                     });

            });


    </script>


}

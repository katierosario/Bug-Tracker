@model Bug_Tracker.Models.ApplicationUser
@using Bug_Tracker.Helpers

<!-- Page Header Start -->
<!--================================-->
<div class="page-header">
    <div class="search-form">
        @*<form action="#" method="GET">
            <div class="input-group">
                <input class="form-control search-input" name="search" placeholder="Type something..." type="text" />
                <span class="input-group-btn">
                    <span id="close-search"><i class="ion-ios-close-empty"></i></span>
                </span>
            </div>
        </form>*@
    </div>
    <!--================================-->
    <!-- Page Header  Start -->
    <!--================================-->
    <nav class="navbar navbar-expand-lg">
        <ul class="list-inline list-unstyled mg-r-20">
            <!-- Mobile Toggle and Logo -->
            <li class="list-inline-item align-text-top"><a class="hidden-md hidden-lg" href="#" id="sidebar-toggle-button"><i class="ion-navicon tx-20"></i></a></li>
            <!-- PC Toggle and Logo -->
            <li class="list-inline-item align-text-top"><a class="hidden-xs hidden-sm" href="#" id="collapsed-sidebar-toggle-button"><i class="ion-navicon tx-20"></i></a></li>
        </ul>
        <!--================================-->
        <!-- Mega Menu Start -->
        <!--================================-->
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
            </ul>
        </div>
        <!--/ Mega Menu End-->
        <!--/ Brand and Logo End -->
        <!--================================-->
        <!-- Header Right Start -->
        <!--================================-->
        <div class="header-right pull-right">
            <ul class="list-inline justify-content-end">
                @*<li class="list-inline-item align-middle"><a href="#" id="search-button"><i class="ion-ios-search-strong tx-20"></i></a></li>*@
                <!--================================-->
                <!-- Notifications Dropdown Start -->
                <!--================================-->
                <li class="list-inline-item dropdown hidden-xs">
                    <a class="notification-icon" href="" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icon-bell tx-16"></i>
                        @if (MessageHelper.GetUnreadtNotifications().Count > 0)
                        {
                        <span class="notification-count wave in"></span>
                        }
                    </a>
                    <div class="dropdown-menu dropdown-menu-right shadow-2">
                        <!-- Top Notifications Area -->
                        <div class="top-notifications-area">
                            <!-- Heading -->
                            <div class="notifications-heading">
                                <div class="heading-title">
                                    <h6>Notifications</h6>
                                </div>
                                <span>@MessageHelper.GetUnreadtNotifications().Count</span>
                            </div>
                            <div class="notifications-box" id="notificationsBox">
                                @foreach (var notification in MessageHelper.GetUnreadtNotifications())
                                {
                                    <a class="dropdown-item list-group-item" href="@Url.Action("Details", "Tickets", new { id = notification.TicketId, notificationId = notification.Id })">
                                        <div class="d-flex justify-content-between">
                                            <div class="wd-45 ht-38 mg-r-15 d-flex align-items-center justify-content-center">
                                                <i class="fa fa-bell tx-warning tx-16"></i>
                                            </div>
                                            <div>
                                                <span>@notification.Sender.FullName</span>
                                                <span class="small tx-gray-600 ft-right">@notification.Created.ToString("MM/dd/yyyy h:mm tt")</span>
                                                <div class="tx-gray-600 tx-11">@notification.NotificationBody</div>
                                            </div>
                                        </div>
                                    </a>
                                }

                            </div>
                            <div class="notifications-footer">
                                @Html.ActionLink("View all Notifications", "Index", "TicketNotifications")
                            </div>
                        </div>
                    </div>
                </li>
                <!--/ Notifications Dropdown End -->
                <!--================================-->
                <!-- Profile Dropdown Start -->
                <!--================================-->
                <li class="list-inline-item dropdown">
                    <a href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="select-profile">Hello, @Model.FirstName !</span><img src="@Model.AvatarPath" class="img-fluid wd-35 ht-35 rounded-circle" alt=""></a>
                    <div class="dropdown-menu dropdown-menu-right dropdown-profile shadow-2">
                        @if (Model != null)
                        {
                            <div class="user-profile-area">
                                <div class="user-profile-heading">
                                    <div class="profile-text">
                                        <h6>@Model.FullName</h6>
                                        <span>@Model.Email</span>
                                    </div>
                                </div>
                                <a href="@Url.Action("EditProfile", "UserProfiles")" class="dropdown-item"><i class="icon-settings" aria-hidden="true"></i>Edit Profile</a>
                                <a href="@Url.Action("CustomLogOff", "Account")" class="dropdown-item"><i class="icon-power" aria-hidden="true"></i>Sign-out</a>
                            </div>

                        }
                        else
                        {
                            <div class="user-profile-area">
                                <div class="user-profile-heading">
                                    <div class="profile-text">
                                        <h6>User Not Logged In</h6>
                                    </div>
                                </div>
                            </div>
                        }

                    </div>
                </li>
                <!-- Profile Dropdown End -->
                <!--================================-->
                <!-- Setting Sidebar Start -->
                <!--================================-->

                <!--/ Setting Sidebar End -->
            </ul>
        </div>
        <!--/ Header Right End -->
    </nav>
</div>
<!--/ Page Header End -->
<!--================================-->